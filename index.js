import{i as d,R as P,S as H,a as X,A as j}from"./assets/vendor-vJBc72Y5.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();const F=document.getElementById("header"),V=document.getElementById("menuBtn"),N=document.getElementById("closeBtn"),M=document.getElementById("mobileMenu"),B=document.getElementById("overlay"),W=document.querySelectorAll(".mobile-nav-link");window.addEventListener("scroll",()=>{window.scrollY>10?F.classList.add("scrolled"):F.classList.remove("scrolled")});const G=()=>{M.classList.add("active"),B.classList.add("active"),document.body.style.overflow="hidden"},g=()=>{M.classList.remove("active"),B.classList.remove("active"),document.body.style.overflow=""};V.addEventListener("click",G);N.addEventListener("click",g);B.addEventListener("click",g);W.forEach(e=>{e.addEventListener("click",t=>{const r=e.getAttribute("href");r.startsWith("#")?(setTimeout(()=>{var o;g(),(o=document.querySelector(r))==null||o.scrollIntoView({behavior:"smooth"})},150),t.preventDefault()):g()})});const I=document.querySelector(".btn-cta-mobile");I&&I.addEventListener("click",e=>{const t=I.getAttribute("href");t.startsWith("#")?(e.preventDefault(),setTimeout(()=>{var r;g(),(r=document.querySelector(t))==null||r.scrollIntoView({behavior:"smooth"})},150)):g()});document.addEventListener("keydown",e=>{e.key==="Escape"&&M.classList.contains("active")&&g()});const f=document.querySelector(".order-modal"),v=document.querySelector(".order-form"),J=document.querySelector(".order-close");let R="";f&&!f.classList.contains("hidden")&&(R=document.title,document.title="Замовити зворотний зв’язок.",document.body.style.overflow="hidden");J.addEventListener("click",()=>E());let k=!1;f.addEventListener("mousedown",e=>{k=e.target===f});f.addEventListener("mouseup",e=>{e.target===f&&k&&E(),k=!1});document.addEventListener("keydown",e=>{e.key==="Escape"&&E()});function E(){f.classList.add("hidden"),document.title=R,document.body.style.overflow="","selectedFurnitureId"in localStorage&&localStorage.removeItem("selectedFurnitureId"),"selectedFurnitureColor"in localStorage&&localStorage.removeItem("selectedFurnitureColor")}v.addEventListener("submit",async e=>{e.preventDefault();const t=v.elements.name,r=v.elements.phone,o=v.elements.comment;let s=!0;if([t,r,o].forEach(n=>{n.classList.remove("error"),n.value.trim()||(n.classList.add("error"),s=!1)}),!/^\+?\d{10,15}$/.test(r.value.trim())){r.classList.add("error"),d.error({title:"Помилка",message:"Введіть правильний номер телефону у форматі +380XXXXXXXXX",position:"center",timeout:3e3});return}const c=o.value.trim();if(!/^[a-zA-Zа-яА-ЯїЇіІєЄґҐ0-9\s.,!?'"()\-:;]{5,300}$/u.test(c)){o.classList.add("error"),d.error({title:"Помилка",message:"Коментар має містити від 5 до 300 символів і не містити заборонених знаків.",position:"center",timeout:3e3});return}if(!s){d.error({title:"Помилка",message:"Заповніть усі обовʼязкові поля!",position:"center",timeout:3e3});return}const a={name:t.value.trim(),phone:r.value.trim(),modelId:localStorage.getItem("selectedFurnitureId")||"682f9bbf8acbdf505592ac36",color:localStorage.getItem("selectedFurnitureColor")||"#1212ca",comment:c};try{const n=await fetch("https://furniture-store-v2.b.goit.study/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!n.ok){const m=await n.json();d.error({title:"Помилка сервера",message:m.message||"Не вдалося зробити замовлення.",position:"center",timeout:3e3});return}d.success({title:"Успішно!",message:"Вашу заявку відправлено.",position:"center",timeout:3e3}),v.reset(),E()}catch(n){d.error({title:"Помилка",message:n.message||"Не вдалося відправити заявку",position:"topRight"})}});const _=document.querySelector(".modal-wrapper");async function K(e){const t=`https://furniture-store-v2.b.goit.study/api/furnitures/${e}`;try{return(await axios.get(t)).data}catch(r){return iziToast.error({position:"topRight",message:`Помилка завантаження деталей товару: ${r.message}`}),null}}function Q(){document.querySelectorAll(".details-button").forEach(t=>{t.addEventListener("click",async r=>{const o=r.target.dataset.id,s=await K(o);s&&U(s)})})}function U(e){const t=`
        <div class="modal-backdrop" id="productModal">
            <div class="modal-content" data-product-id="${e._id}">
                <button class="close-button" id="closeModalButton">&times;</button>
                <div class="product-details">
                    <div class="image-column">
                        <div class="main-image-container">
                            <img src="${e.images[0]}" alt="${e.name}" class="main-image" id="modalMainImage">
                        </div>
                        <div class="additional-images">
                            ${e.images[1]?`<div class="image-thumb"><img src="${e.images[1]}" alt="Додаткове зображення 1" class="thumb-image"></div>`:""}
                            ${e.images[2]?`<div class="image-thumb"><img src="${e.images[2]}" alt="Додаткове зображення 2" class="thumb-image"></div>`:""}
                        </div>
                    </div>
                    <div class="product-info-column">
                        <h1 class="product-title">${e.name}</h1>
                        <p class="product-category">${e.type}</p>
                        <p class="product-price">${e.price} грн</p>
                        <div class="product-rating" id="productRating" data-score="${e.rate}"></div>
                        <div class="color-options">
                            <p class="color-label">Колір</p>
                            <div class="color-swatches" id="modalColorOptions">
                                ${e.color.slice(0,3).map((c,l)=>`<div 
                                        class="color-swatch ${l===0?"selected":""}" 
                                        data-color-id="${e._id}-${l}" 
                                        data-img-index="${l}"
                                        style="background-color: ${c};"
                                    ></div>`).join("")}
                            </div>
                        </div>
                        <p class="product-description">${e.description||"Класичний диван з м'якими подушками та високою спинкою, ідеальний для сімейного відпочинку. Оббивка з якісної зносостійкої тканини."}</p>
                        <p class="product-size"><span class="size-label">Розміри:</span> ${e.dimensions||"280х80х85"}</p>
                        <button class="order-button" id="submitOrderButton">Перейти до замовлення</button>
                    </div>
                </div>
            </div>
        </div>
    `;_.innerHTML=t;const r=document.getElementById("productModal");r.style.display="flex",document.body.style.overflow="hidden",Y(e);const o=document.getElementById("productRating"),s=parseFloat(o.dataset.score);new P(o,{readOnly:!0,score:s,starType:"i",round:{down:.25,full:.75,up:.76}}).init()}function Y(e){const t=document.getElementById("productModal");if(!t)return;const r=t.querySelector("#closeModalButton"),o=t.querySelectorAll(".color-swatch"),s=t.querySelector("#modalMainImage"),i=t.querySelector("#submitOrderButton"),c=()=>{t.style.display="none",document.body.style.overflow="auto",_.innerHTML=""};r.addEventListener("click",c),t.addEventListener("click",a=>{a.target===t&&c()});let l=t.querySelector(".color-swatch.selected"),u=l?l.style.backgroundColor:null;const A=a=>{if(!a||typeof a!="string")return a;const n=a.trim();if(n.startsWith("#"))return n.toLowerCase();const m=n.match(/(\d+(\.\d+)?%?)/g);if(!m||m.length<3)return n;const $=y=>y.endsWith("%")?Math.round(parseFloat(y)/100*255):Math.round(parseFloat(y)),x=$(m[0]),D=$(m[1]),z=$(m[2]),S=y=>y.toString(16).padStart(2,"0");return`#${S(x)}${S(D)}${S(z)}`.toLowerCase()};o.forEach(a=>{a.addEventListener("click",()=>{t.querySelector(".color-swatch.selected").classList.remove("selected"),a.classList.add("selected");const n=parseInt(a.dataset.imgIndex);e.images[n]&&(s.src=e.images[n]),u=a.style.backgroundColor})}),i.addEventListener("click",()=>{try{if(!u&&l&&(u=getComputedStyle(l).backgroundColor),!u){iziToast.warning({position:"topRight",message:"Будь ласка, оберіть колір перед продовженням!"});return}let a=u.startsWith("#")?u.toLowerCase():A(u);localStorage.setItem("selectedFurnitureId",e._id),localStorage.setItem("selectedFurnitureColor",a),c();const n=document.querySelector(".order-modal");n?(n.classList.remove("hidden"),document.body.style.overflow="hidden"):(console.error("Елемент '.order-modal' не знайдено."),iziToast.warning({position:"topRight",message:"Форма замовлення недоступна. Дані збережено."}))}catch(a){console.error("Несподівана помилка в обробнику submit:",a),iziToast.error({position:"topRight",message:"Виникла помилка при оформленні замовлення."})}})}let p=1,w=0,L=8,b="",q=document.querySelector(".our-furniture .furniture-items"),Z=document.querySelector(".our-furniture .options");const h=document.querySelector(".our-furniture .show-more");Z.addEventListener("click",async e=>{const t=e.target.closest(".option");if(!t)return;document.querySelectorAll(".our-furniture .options .option").forEach(s=>s.classList.remove("active")),t.classList.add("active"),b=t.dataset.category,p=1;const r=await C(b,p),o=r.furnitures;q.innerHTML="",T(o),w=Math.ceil(r.totalItems/L),h.style.display=p<w?"block":"none"});h.addEventListener("click",async()=>{h.classList.add("active"),p++;const t=(await C(b,p)).furnitures;T(t),h.classList.remove("active"),h.style.display=p<w?"block":"none"});window.addEventListener("DOMContentLoaded",async()=>{let e=document.querySelector(".our-furniture .options .option:first-child");e.classList.add("active"),b=e.dataset.category;let t=await C(b,p),r=t.furnitures;q.innerHTML="",T(r),w=Math.ceil(t.totalItems/L)});async function C(e,t){const r=e==="All furniture"?`https://furniture-store-v2.b.goit.study/api/furnitures?page=${t}&limit=${L}`:`https://furniture-store-v2.b.goit.study/api/furnitures?category=${e}&page=${t}&limit=${L}`;try{return(await axios.get(r)).data}catch(o){return d.info({position:"topRight",message:o.message}),{furnitures:[],totalItems:0}}}function T(e){let t=e.map(o=>`<li class="item" data-id="${o._id}">
        <div class="item-image-container">
            <img src="${o.images[0]}"/>
        </div>
            <p class="item-name">${o.name}</p>
            <div class="color-options">
                <button class="color" type="button" data-color = "${o.color[0]}" data-img="${o.images[0]}"></button>
                <button class="color" type="button" data-color = "${o.color[1]}" data-img="${o.images[1]}"></button>
                <button class="color" type="button" data-color = "${o.color[2]}" data-img="${o.images[2]}"></button>
            </div>

            <p class="item-price"><span>${o.price}</span> грн</p>
            <button class="details-button" data-id="${o._id}">Детальніше</button>
        
        </li>`).join("");q.insertAdjacentHTML("beforeend",t),document.querySelectorAll(".our-furniture .furniture-items .item .color-options .color").forEach(o=>{o.style.backgroundColor=o.dataset.color}),ee(),Q()}function ee(){document.querySelectorAll(".color-options .color").forEach(t=>{t.addEventListener("click",()=>{const r=t.dataset.img,s=t.closest(".item").querySelector(".item-image-container img");s.src=r})})}async function te(){try{return(await X.get("https://furniture-store.b.goit.study/api/feedbacks",{params:{page:1,limit:10}})).data.feedbacks}catch(e){d.error({title:"Помилка",message:"Не вдалося завантажити відгуки. Спробуйте пізніше.",position:"topRight"}),console.error("Error fetching feedbacks:",e)}}async function oe(e){const t=document.querySelector(".review-carousel"),r=e.map(o=>`<li class="review-item swiper-slide">
  <div class="stars-rating" data-score="${o.rate}"></div>
  <p class="review-item-text">"${o.descr}"</p>
  <p class="review-item-name">${o.name}</p>
</li>`).join("");t.querySelector(".review .swiper-wrapper").insertAdjacentHTML("beforeend",r),document.querySelectorAll(".stars-rating").forEach(o=>{const s=parseFloat(o.dataset.score);new P(o,{round:{down:.25,full:.75,up:.76},readOnly:!0,score:s,starType:"i"}).init()})}const re=document.querySelector(".review-carousel"),se=new H(re,{slidesPerView:1,spaceBetween:16,breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3}},pagination:{el:".review .swiper-pagination",clickable:!0,dynamicBullets:!0},navigation:{prevEl:".review .nav-btn-prev",nextEl:".review .nav-btn-next"}});async function ne(){try{const e=await te();oe(e),se.update()}catch(e){d.error({title:"Помилка",message:"Не вдалося завантажити галерею відгуків. Спробуйте пізніше.",position:"topRight"}),console.error("Error fetching feedback:",e)}finally{}}ne();function ae(){if(document.querySelector(".accordion-container"))try{new j(".accordion-container",{duration:400,showMultiple:!1,collapse:!0,onOpen:t=>{},onClose:t=>{}})}catch{}}document.addEventListener("DOMContentLoaded",ae);const O=document.querySelector(".footer-logo");O&&O.addEventListener("click",e=>{e.preventDefault();const t=window.location.pathname.split("/"),r=t[1]?`/${t[1]}/`:"/";window.location.href=window.location.origin+r});
//# sourceMappingURL=index.js.map
