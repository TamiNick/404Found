import{i as d,R as z,S as V,a as N,A as W}from"./assets/vendor-vJBc72Y5.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();const P=document.getElementById("header"),G=document.getElementById("menuBtn"),J=document.getElementById("closeBtn"),C=document.getElementById("mobileMenu"),T=document.getElementById("overlay"),K=document.querySelectorAll(".mobile-nav-link");window.addEventListener("scroll",()=>{window.scrollY>10?P.classList.add("scrolled"):P.classList.remove("scrolled")});const Q=()=>{C.classList.add("active"),T.classList.add("active"),document.body.style.overflow="hidden"},g=()=>{C.classList.remove("active"),T.classList.remove("active"),document.body.style.overflow=""};G.addEventListener("click",Q);J.addEventListener("click",g);T.addEventListener("click",g);K.forEach(e=>{e.addEventListener("click",t=>{const r=e.getAttribute("href");r.startsWith("#")?(setTimeout(()=>{var o;g(),(o=document.querySelector(r))==null||o.scrollIntoView({behavior:"smooth"})},150),t.preventDefault()):g()})});const I=document.querySelector(".btn-cta-mobile");I&&I.addEventListener("click",e=>{const t=I.getAttribute("href");t.startsWith("#")?(e.preventDefault(),setTimeout(()=>{var r;g(),(r=document.querySelector(t))==null||r.scrollIntoView({behavior:"smooth"})},150)):g()});document.addEventListener("keydown",e=>{e.key==="Escape"&&C.classList.contains("active")&&g()});const f=document.querySelector(".order-modal"),h=document.querySelector(".order-form"),U=document.querySelector(".order-close");let R="";f&&!f.classList.contains("hidden")&&(R=document.title,document.title="Замовити зворотний зв’язок.",document.body.style.overflow="hidden");U.addEventListener("click",()=>S());let q=!1;f.addEventListener("mousedown",e=>{q=e.target===f});f.addEventListener("mouseup",e=>{e.target===f&&q&&S(),q=!1});document.addEventListener("keydown",e=>{e.key==="Escape"&&S()});function S(){f.classList.add("hidden"),document.title=R,document.body.style.overflow="","selectedFurnitureId"in localStorage&&localStorage.removeItem("selectedFurnitureId"),"selectedFurnitureColor"in localStorage&&localStorage.removeItem("selectedFurnitureColor")}h.addEventListener("submit",async e=>{e.preventDefault();const t=h.elements.name,r=h.elements.phone,o=h.elements.comment;let s=!0;if([t,r,o].forEach(n=>{n.classList.remove("error"),n.value.trim()||(n.classList.add("error"),s=!1)}),!/^\+?\d{10,15}$/.test(r.value.trim())){r.classList.add("error"),d.error({title:"Помилка",message:"Введіть правильний номер телефону у форматі +380XXXXXXXXX",position:"center",timeout:3e3});return}const c=o.value.trim();if(!/^[a-zA-Zа-яА-ЯїЇіІєЄґҐ0-9\s.,!?'"()\-:;]{5,300}$/u.test(c)){o.classList.add("error"),d.error({title:"Помилка",message:"Коментар має містити від 5 до 300 символів і не містити заборонених знаків.",position:"center",timeout:3e3});return}if(!s){d.error({title:"Помилка",message:"Заповніть усі обовʼязкові поля!",position:"center",timeout:3e3});return}const i={name:t.value.trim(),phone:r.value.trim(),modelId:localStorage.getItem("selectedFurnitureId")||"682f9bbf8acbdf505592ac36",color:localStorage.getItem("selectedFurnitureColor")||"#1212ca",comment:c};try{const n=await fetch("https://furniture-store-v2.b.goit.study/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!n.ok){const m=await n.json();d.error({title:"Помилка сервера",message:m.message||"Не вдалося зробити замовлення.",position:"center",timeout:3e3});return}d.success({title:"Успішно!",message:"Вашу заявку відправлено.",position:"center",timeout:3e3}),h.reset(),S()}catch(n){d.error({title:"Помилка",message:n.message||"Не вдалося відправити заявку",position:"topRight"})}});const _=document.querySelector(".modal-wrapper");async function Y(e){const t=`https://furniture-store-v2.b.goit.study/api/furnitures/${e}`;try{return(await axios.get(t)).data}catch(r){return iziToast.error({position:"topRight",message:`Помилка завантаження деталей товару: ${r.message}`}),null}}function Z(){document.querySelectorAll(".details-button").forEach(t=>{t.addEventListener("click",async r=>{const o=r.target.dataset.id,s=await Y(o);s&&ee(s)})})}function ee(e){const t=`
        <div class="modal-backdrop" id="productModal">
            <div class="modal-content" data-product-id="${e._id}">
                <button class="close-button" id="closeModalButton">&times;</button>
                <div class="product-details">
                    <div class="image-column">
                        <div class="main-image-container">
                            <img src="${e.images[0]}" alt="${e.name}" class="main-image" id="modalMainImage">
                        </div>
                        <div class="additional-images">
                            ${e.images[1]?`<div class="image-thumb"><img src="${e.images[1]}" alt="Додаткове зображення 1" class="thumb-image"></div>`:""}
                            ${e.images[2]?`<div class="image-thumb"><img src="${e.images[2]}" alt="Додаткове зображення 2" class="thumb-image"></div>`:""}
                        </div>
                    </div>
                    <div class="product-info-column">
                        <h1 class="product-title">${e.name}</h1>
                        <p class="product-category">${e.type}</p>
                        <p class="product-price">${e.price} грн</p>
                        <div class="product-rating" id="productRating" data-score="${e.rate}"></div>
                        <div class="color-options">
                            <p class="color-label">Колір</p>
                            <div class="color-swatches" id="modalColorOptions">
                                ${e.color.slice(0,3).map((c,l)=>`<div 
                                        class="color-swatch ${l===0?"selected":""}" 
                                        data-color-id="${e._id}-${l}" 
                                        data-img-index="${l}"
                                        style="background-color: ${c};"
                                    ></div>`).join("")}
                            </div>
                        </div>
                        <p class="product-description">${e.description||"Класичний диван з м'якими подушками та високою спинкою, ідеальний для сімейного відпочинку. Оббивка з якісної зносостійкої тканини."}</p>
                        <p class="product-size"><span class="size-label">Розміри:</span> ${e.dimensions||"280х80х85"}</p>
                        <button class="order-button" id="submitOrderButton">Перейти до замовлення</button>
                    </div>
                </div>
            </div>
        </div>
    `;_.innerHTML=t;const r=document.getElementById("productModal");r.style.display="flex",document.body.style.overflow="hidden",te(e);const o=document.getElementById("productRating"),s=parseFloat(o.dataset.score);new z(o,{readOnly:!0,score:s,starType:"i",round:{down:.25,full:.75,up:.76}}).init()}function te(e){const t=document.getElementById("productModal");if(!t)return;const r=t.querySelector("#closeModalButton"),o=t.querySelectorAll(".color-swatch"),s=t.querySelector("#modalMainImage"),a=t.querySelector("#submitOrderButton"),c=()=>{t.style.display="none",document.body.style.overflow="auto",_.innerHTML=""};r.addEventListener("click",c),t.addEventListener("click",i=>{i.target===t&&c()});let l=t.querySelector(".color-swatch.selected"),u=l?l.style.backgroundColor:null;const H=i=>{if(!i||typeof i!="string")return i;const n=i.trim();if(n.startsWith("#"))return n.toLowerCase();const m=n.match(/(\d+(\.\d+)?%?)/g);if(!m||m.length<3)return n;const $=v=>v.endsWith("%")?Math.round(parseFloat(v)/100*255):Math.round(parseFloat(v)),D=$(m[0]),X=$(m[1]),j=$(m[2]),k=v=>v.toString(16).padStart(2,"0");return`#${k(D)}${k(X)}${k(j)}`.toLowerCase()};o.forEach(i=>{i.addEventListener("click",()=>{t.querySelector(".color-swatch.selected").classList.remove("selected"),i.classList.add("selected");const n=parseInt(i.dataset.imgIndex);e.images[n]&&(s.src=e.images[n]),u=i.style.backgroundColor})}),a.addEventListener("click",()=>{try{if(!u&&l&&(u=getComputedStyle(l).backgroundColor),!u){iziToast.warning({position:"topRight",message:"Будь ласка, оберіть колір перед продовженням!"});return}let i=u.startsWith("#")?u.toLowerCase():H(u);localStorage.setItem("selectedFurnitureId",e._id),localStorage.setItem("selectedFurnitureColor",i),c();const n=document.querySelector(".order-modal");n?(n.classList.remove("hidden"),document.body.style.overflow="hidden"):(console.error("Елемент '.order-modal' не знайдено."),iziToast.warning({position:"topRight",message:"Форма замовлення недоступна. Дані збережено."}))}catch(i){console.error("Несподівана помилка в обробнику submit:",i),iziToast.error({position:"topRight",message:"Виникла помилка при оформленні замовлення."})}})}let y=1,b=0,L=8,w="",A=document.querySelector(".our-furniture .furniture-items"),oe=document.querySelector(".our-furniture .options");const p=document.querySelector(".our-furniture .show-more");let M=document.querySelector(".loader"),B=document.querySelector(".loader-category");M.style.display="none";B.style.display="none";oe.addEventListener("click",async e=>{A.innerHTML="",p.style.display="none",B.style.display="block";const t=e.target.closest(".option");if(!t)return;document.querySelectorAll(".our-furniture .options .option").forEach(s=>s.classList.remove("active")),t.classList.add("active"),w=t.dataset.category,y=1;const r=await F(w,y),o=r.furnitures;B.style.display="none",O(o),b=Math.ceil(r.totalItems/L),p.style.display=y<b?"block":"none"});p.addEventListener("click",async()=>{p.style.display="none",M.style.display="block",p.classList.add("active"),y++;const t=(await F(w,y)).furnitures;O(t),p.classList.remove("active"),p.style.display=y<b?"block":"none",M.style.display="none"});window.addEventListener("DOMContentLoaded",async()=>{let e=document.querySelector(".our-furniture .options .option:first-child");e.classList.add("active"),w=e.dataset.category;let t=await F(w,y),r=t.furnitures;A.innerHTML="",O(r),b=Math.ceil(t.totalItems/L)});async function F(e,t){const r=e==="All furniture"?`https://furniture-store-v2.b.goit.study/api/furnitures?page=${t}&limit=${L}`:`https://furniture-store-v2.b.goit.study/api/furnitures?category=${e}&page=${t}&limit=${L}`;try{return(await axios.get(r)).data}catch(o){return d.info({position:"topRight",message:o.message}),{furnitures:[],totalItems:0}}}function O(e){let t=e.map(o=>`<li class="item" data-id="${o._id}">
        <div class="item-image-container">
            <img src="${o.images[0]}"/>
        </div>
            <p class="item-name">${o.name}</p>
            <div class="color-options">
                <button class="color" type="button" data-color = "${o.color[0]}" data-img="${o.images[0]}"></button>
                <button class="color" type="button" data-color = "${o.color[1]}" data-img="${o.images[1]}"></button>
                <button class="color" type="button" data-color = "${o.color[2]}" data-img="${o.images[2]}"></button>
            </div>

            <p class="item-price"><span>${o.price}</span> грн</p>
            <button class="details-button" data-id="${o._id}">Детальніше</button>
        
        </li>`).join("");A.insertAdjacentHTML("beforeend",t),document.querySelectorAll(".our-furniture .furniture-items .item .color-options .color").forEach(o=>{o.style.backgroundColor=o.dataset.color}),re(),Z()}function re(){document.querySelectorAll(".color-options .color").forEach(t=>{t.addEventListener("click",()=>{const r=t.dataset.img,s=t.closest(".item").querySelector(".item-image-container img");s.src=r})})}async function se(){try{return(await N.get("https://furniture-store-v2.b.goit.study/api/feedbacks",{params:{page:1,limit:10}})).data.feedbacks}catch(e){d.error({title:"Помилка",message:"Не вдалося завантажити відгуки. Спробуйте пізніше.",position:"topRight"}),console.error("Error fetching feedbacks:",e)}}async function ne(e){const t=document.querySelector(".review-carousel"),r=e.map(o=>`<li class="review-item swiper-slide">
  <div class="stars-rating" data-score="${o.rate}"></div>
  <p class="review-item-text">"${o.descr}"</p>
  <p class="review-item-name">${o.name}</p>
</li>`).join("");t.querySelector(".review .swiper-wrapper").insertAdjacentHTML("beforeend",r),document.querySelectorAll(".stars-rating").forEach(o=>{const s=parseFloat(o.dataset.score);new z(o,{round:{down:.25,full:.75,up:.76},readOnly:!0,score:s,starType:"i"}).init()})}function E(){const e=document.querySelectorAll(".review-item");let t=0;e.forEach(r=>{r.style.height="auto"}),e.forEach(r=>{const o=r.offsetHeight;o>t&&(t=o)}),e.forEach(r=>{r.style.height=`${t}px`})}const ie=document.querySelector(".review-carousel"),ae=new V(ie,{slidesPerView:1,spaceBetween:16,breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3}},pagination:{el:".review .swiper-pagination",clickable:!0,dynamicBullets:!0},navigation:{prevEl:".review .nav-btn-prev",nextEl:".review .nav-btn-next"},on:{init:function(){setTimeout(E,100)},resize:function(){E()}}});async function ce(){try{const e=await se();if(!e||!Array.isArray(e)||e.length===0){console.warn("Дані відгуків не завантажені або порожні. Рендеринг відмінено.");return}await ne(e),ae.update(),setTimeout(E,200)}catch(e){d.error({title:"Помилка",message:"Не вдалося завантажити галерею відгуків. Спробуйте пізніше.",position:"topRight"}),console.error("Error fetching feedback:",e)}}ce();window.addEventListener("resize",E);function le(){if(document.querySelector(".accordion-container"))try{new W(".accordion-container",{duration:400,showMultiple:!1,collapse:!0,onOpen:t=>{},onClose:t=>{}})}catch{}}document.addEventListener("DOMContentLoaded",le);const x=document.querySelector(".footer-logo");x&&x.addEventListener("click",e=>{e.preventDefault();const t=window.location.pathname.split("/"),r=t[1]?`/${t[1]}/`:"/";window.location.href=window.location.origin+r});
//# sourceMappingURL=index.js.map
