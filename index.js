import{i,S as E,a as $,R as q,A as I}from"./assets/vendor-BkXgttEf.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))e(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&e(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function e(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const m=document.querySelector(".order-modal"),u=document.querySelector(".order-form"),k=document.querySelector(".order-close");let b="";m&&!m.classList.contains("hidden")&&(b=document.title,document.title="Замовити зворотний зв’язок.",document.body.style.overflow="hidden");k.addEventListener("click",()=>g());m.addEventListener("click",r=>{r.target===m&&g()});document.addEventListener("keydown",r=>{r.key==="Escape"&&g()});function g(){m.classList.add("hidden"),document.title=b,document.body.style.overflow="","selectedFurnitureId"in localStorage&&localStorage.removeItem("selectedFurnitureId"),"selectedFurnitureColor"in localStorage&&localStorage.removeItem("selectedFurnitureColor")}u.addEventListener("submit",async r=>{r.preventDefault();const t=u.elements.name,n=u.elements.phone,e=u.elements.comment;let o=!0;if([t,n,e].forEach(a=>{a.classList.remove("error"),a.value.trim()||(a.classList.add("error"),o=!1)}),!/^\+?\d{10,15}$/.test(n.value.trim())){n.classList.add("error"),i.error({title:"Помилка",message:"Введіть правильний номер телефону у форматі +380XXXXXXXXX",position:"center",timeout:3e3});return}const l=e.value.trim();if(!/^[a-zA-Zа-яА-ЯїЇіІєЄґҐ0-9\s.,!?'"()\-:;]{5,300}$/u.test(l)){e.classList.add("error"),i.error({title:"Помилка",message:"Коментар має містити від 5 до 300 символів і не містити заборонених знаків.",position:"center",timeout:3e3});return}if(!o){i.error({title:"Помилка",message:"Заповніть усі обовʼязкові поля!",position:"center",timeout:3e3});return}const L={name:t.value.trim(),phone:n.value.trim(),modelId:localStorage.getItem("selectedFurnitureId")||"682f9bbf8acbdf505592ac36",color:localStorage.getItem("selectedFurnitureColor")||"#1212ca",comment:l};try{const a=await fetch("https://furniture-store-v2.b.goit.study/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)});if(!a.ok){const S=await a.json();i.error({title:"Помилка сервера",message:S.message||"Не вдалося зробити замовлення.",position:"center",timeout:3e3});return}i.success({title:"Успішно!",message:"Вашу заявку відправлено.",position:"center",timeout:3e3}),u.reset(),g()}catch(a){i.error({title:"Помилка",message:a.message||"Не вдалося відправити заявку",position:"topRight"})}});let c=1,f=0,y=8,p="",v=document.querySelector(".our-furniture .furniture-items"),C=document.querySelector(".our-furniture .options");const d=document.querySelector(".our-furniture .show-more");C.addEventListener("click",async r=>{const t=r.target.closest(".option");if(!t)return;document.querySelectorAll(".our-furniture .options .option").forEach(o=>o.classList.remove("active")),t.classList.add("active"),p=t.dataset.category,c=1;const n=await h(p,c),e=n.furnitures;v.innerHTML="",w(e),f=Math.ceil(n.totalItems/y),d.style.display=c<f?"block":"none"});d.addEventListener("click",async()=>{d.classList.add("active"),c++;const t=(await h(p,c)).furnitures;w(t),d.classList.remove("active"),d.style.display=c<f?"block":"none"});window.addEventListener("DOMContentLoaded",async()=>{let r=document.querySelector(".our-furniture .options .option:first-child");r.classList.add("active"),p=r.dataset.category;let t=await h(p,c),n=t.furnitures;v.innerHTML="",w(n),f=Math.ceil(t.totalItems/y)});async function h(r,t){const n=r==="All furniture"?`https://furniture-store-v2.b.goit.study/api/furnitures?page=${t}&limit=${y}`:`https://furniture-store-v2.b.goit.study/api/furnitures?category=${r}&page=${t}&limit=${y}`;try{return(await axios.get(n)).data}catch(e){return i.info({position:"topRight",message:e.message}),{furnitures:[],totalItems:0}}}function w(r){let t=r.map(e=>`<li class="item" data-id="${e._id}">
        <div class="item-image-container">
            <img src="${e.images[0]}"/>
        </div>
            <p class="item-name">${e.name}</p>
            <div class="color-options">
                <button class="color" type="button" data-color = "${e.color[0]}" data-img="${e.images[0]}"></button>
                <button class="color" type="button" data-color = "${e.color[1]}" data-img="${e.images[1]}"></button>
                <button class="color" type="button" data-color = "${e.color[2]}" data-img="${e.images[2]}"></button>
            </div>

            <p class="item-price"><span>${e.price}</span> грн</p>
            <button class="details-button">Детальніше</button>
        
        </li>`).join("");v.insertAdjacentHTML("beforeend",t),document.querySelectorAll(".our-furniture .furniture-items .item .color-options .color").forEach(e=>{e.style.backgroundColor=e.dataset.color}),P()}function P(){document.querySelectorAll(".color-options .color").forEach(t=>{t.addEventListener("click",()=>{const n=t.dataset.img,o=t.closest(".item").querySelector(".item-image-container img");o.src=n})})}async function A(){try{return(await $.get("https://furniture-store.b.goit.study/api/feedbacks",{params:{page:1,limit:10}})).data.feedbacks}catch(r){i.error({title:"Помилка",message:"Не вдалося завантажити відгуки. Спробуйте пізніше.",position:"topRight"}),console.error("Error fetching feedbacks:",r)}}async function F(r){const t=document.querySelector(".review-carousel"),n=r.map(e=>`<li class="review-item swiper-slide">
  <div class="stars-rating" data-score="${e.rate}"></div>
  <p class="review-item-text">"${e.descr}"</p>
  <p class="review-item-name">${e.name}</p>
</li>`).join("");t.querySelector(".review .swiper-wrapper").insertAdjacentHTML("beforeend",n),document.querySelectorAll(".stars-rating").forEach(e=>{const o=parseFloat(e.dataset.score);new q(e,{round:{down:.25,full:.75,up:.76},readOnly:!0,score:o,starType:"i"}).init()})}const M=document.querySelector(".review-carousel"),O=new E(M,{slidesPerView:1,spaceBetween:16,breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3}},pagination:{el:".review .swiper-pagination",clickable:!0,dynamicBullets:!0},navigation:{prevEl:".review .nav-btn-prev",nextEl:".review .nav-btn-next"}});async function B(){try{const r=await A();F(r),O.update()}catch(r){i.error({title:"Помилка",message:"Не вдалося завантажити галерею відгуків. Спробуйте пізніше.",position:"topRight"}),console.error("Error fetching feedback:",r)}finally{}}B();function T(){if(document.querySelector(".accordion-container"))try{new I(".accordion-container",{duration:400,showMultiple:!1,collapse:!0,onOpen:t=>{},onClose:t=>{}})}catch{}}document.addEventListener("DOMContentLoaded",T);
//# sourceMappingURL=index.js.map
