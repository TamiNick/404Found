import{i as d,R as A,S as z,a as H,A as X}from"./assets/vendor-vJBc72Y5.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();const T=document.getElementById("header"),j=document.getElementById("menuBtn"),D=document.getElementById("closeBtn"),k=document.getElementById("mobileMenu"),I=document.getElementById("overlay"),N=document.querySelectorAll(".mobile-nav-link");window.addEventListener("scroll",()=>{window.scrollY>10?T.classList.add("scrolled"):T.classList.remove("scrolled")});const V=()=>{k.classList.add("active"),I.classList.add("active"),document.body.style.overflow="hidden"},L=()=>{k.classList.remove("active"),I.classList.remove("active"),document.body.style.overflow=""};j.addEventListener("click",V);D.addEventListener("click",L);I.addEventListener("click",L);N.forEach(e=>{e.addEventListener("click",L)});document.addEventListener("keydown",e=>{e.key==="Escape"&&k.classList.contains("active")&&L()});const v=document.querySelector(".order-modal"),y=document.querySelector(".order-form"),W=document.querySelector(".order-close");let O="";v&&!v.classList.contains("hidden")&&(O=document.title,document.title="Замовити зворотний зв’язок.",document.body.style.overflow="hidden");W.addEventListener("click",()=>E());v.addEventListener("click",e=>{e.target===v&&E()});document.addEventListener("keydown",e=>{e.key==="Escape"&&E()});function E(){v.classList.add("hidden"),document.title=O,document.body.style.overflow="","selectedFurnitureId"in localStorage&&localStorage.removeItem("selectedFurnitureId"),"selectedFurnitureColor"in localStorage&&localStorage.removeItem("selectedFurnitureColor")}y.addEventListener("submit",async e=>{e.preventDefault();const t=y.elements.name,s=y.elements.phone,o=y.elements.comment;let r=!0;if([t,s,o].forEach(n=>{n.classList.remove("error"),n.value.trim()||(n.classList.add("error"),r=!1)}),!/^\+?\d{10,15}$/.test(s.value.trim())){s.classList.add("error"),d.error({title:"Помилка",message:"Введіть правильний номер телефону у форматі +380XXXXXXXXX",position:"center",timeout:3e3});return}const c=o.value.trim();if(!/^[a-zA-Zа-яА-ЯїЇіІєЄґҐ0-9\s.,!?'"()\-:;]{5,300}$/u.test(c)){o.classList.add("error"),d.error({title:"Помилка",message:"Коментар має містити від 5 до 300 символів і не містити заборонених знаків.",position:"center",timeout:3e3});return}if(!r){d.error({title:"Помилка",message:"Заповніть усі обовʼязкові поля!",position:"center",timeout:3e3});return}const a={name:t.value.trim(),phone:s.value.trim(),modelId:localStorage.getItem("selectedFurnitureId")||"682f9bbf8acbdf505592ac36",color:localStorage.getItem("selectedFurnitureColor")||"#1212ca",comment:c};try{const n=await fetch("https://furniture-store-v2.b.goit.study/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!n.ok){const m=await n.json();d.error({title:"Помилка сервера",message:m.message||"Не вдалося зробити замовлення.",position:"center",timeout:3e3});return}d.success({title:"Успішно!",message:"Вашу заявку відправлено.",position:"center",timeout:3e3}),y.reset(),E()}catch(n){d.error({title:"Помилка",message:n.message||"Не вдалося відправити заявку",position:"topRight"})}});const P=document.querySelector(".modal-wrapper");async function G(e){const t=`https://furniture-store-v2.b.goit.study/api/furnitures/${e}`;try{return(await axios.get(t)).data}catch(s){return iziToast.error({position:"topRight",message:`Помилка завантаження деталей товару: ${s.message}`}),null}}function J(){document.querySelectorAll(".details-button").forEach(t=>{t.addEventListener("click",async s=>{const o=s.target.dataset.id,r=await G(o);r&&K(r)})})}function K(e){const t=`
        <div class="modal-backdrop" id="productModal">
            <div class="modal-content" data-product-id="${e._id}">
                <button class="close-button" id="closeModalButton">&times;</button>
                <div class="product-details">
                    <div class="image-column">
                        <div class="main-image-container">
                            <img src="${e.images[0]}" alt="${e.name}" class="main-image" id="modalMainImage">
                        </div>
                        <div class="additional-images">
                            ${e.images[1]?`<div class="image-thumb"><img src="${e.images[1]}" alt="Додаткове зображення 1" class="thumb-image"></div>`:""}
                            ${e.images[2]?`<div class="image-thumb"><img src="${e.images[2]}" alt="Додаткове зображення 2" class="thumb-image"></div>`:""}
                        </div>
                    </div>
                    <div class="product-info-column">
                        <h1 class="product-title">${e.name}</h1>
                        <p class="product-category">${e.type}</p>
                        <p class="product-price">${e.price} грн</p>
                        <div class="product-rating" id="productRating" data-score="${e.rate}"></div>
                        <div class="color-options">
                            <p class="color-label">Колір</p>
                            <div class="color-swatches" id="modalColorOptions">
                                ${e.color.slice(0,3).map((c,l)=>`<div 
                                        class="color-swatch ${l===0?"selected":""}" 
                                        data-color-id="${e._id}-${l}" 
                                        data-img-index="${l}"
                                        style="background-color: ${c};"
                                    ></div>`).join("")}
                            </div>
                        </div>
                        <p class="product-description">${e.description||"Класичний диван з м'якими подушками та високою спинкою, ідеальний для сімейного відпочинку. Оббивка з якісної зносостійкої тканини."}</p>
                        <p class="product-size"><span class="size-label">Розміри:</span> ${e.dimensions||"280х80х85"}</p>
                        <button class="order-button" id="submitOrderButton">Перейти до замовлення</button>
                    </div>
                </div>
            </div>
        </div>
    `;P.innerHTML=t;const s=document.getElementById("productModal");s.style.display="flex",document.body.style.overflow="hidden",Q(e);const o=document.getElementById("productRating"),r=parseFloat(o.dataset.score);new A(o,{readOnly:!0,score:r,starType:"i",round:{down:.25,full:.75,up:.76}}).init()}function Q(e){const t=document.getElementById("productModal");if(!t)return;const s=t.querySelector("#closeModalButton"),o=t.querySelectorAll(".color-swatch"),r=t.querySelector("#modalMainImage"),i=t.querySelector("#submitOrderButton"),c=()=>{t.style.display="none",document.body.style.overflow="auto",P.innerHTML=""};s.addEventListener("click",c),t.addEventListener("click",a=>{a.target===t&&c()});let l=t.querySelector(".color-swatch.selected"),u=l?l.style.backgroundColor:null;const C=a=>{if(!a||typeof a!="string")return a;const n=a.trim();if(n.startsWith("#"))return n.toLowerCase();const m=n.match(/(\d+(\.\d+)?%?)/g);if(!m||m.length<3)return n;const $=g=>g.endsWith("%")?Math.round(parseFloat(g)/100*255):Math.round(parseFloat(g)),R=$(m[0]),_=$(m[1]),x=$(m[2]),S=g=>g.toString(16).padStart(2,"0");return`#${S(R)}${S(_)}${S(x)}`.toLowerCase()};o.forEach(a=>{a.addEventListener("click",()=>{t.querySelector(".color-swatch.selected").classList.remove("selected"),a.classList.add("selected");const n=parseInt(a.dataset.imgIndex);e.images[n]&&(r.src=e.images[n]),u=a.style.backgroundColor})}),i.addEventListener("click",()=>{try{if(!u&&l&&(u=getComputedStyle(l).backgroundColor),!u){iziToast.warning({position:"topRight",message:"Будь ласка, оберіть колір перед продовженням!"});return}let a=u.startsWith("#")?u.toLowerCase():C(u);localStorage.setItem("selectedFurnitureId",e._id),localStorage.setItem("selectedFurnitureColor",a),c();const n=document.querySelector(".order-modal");n?(n.classList.remove("hidden"),document.body.style.overflow="hidden"):(console.error("Елемент '.order-modal' не знайдено."),iziToast.warning({position:"topRight",message:"Форма замовлення недоступна. Дані збережено."}))}catch(a){console.error("Несподівана помилка в обробнику submit:",a),iziToast.error({position:"topRight",message:"Виникла помилка при оформленні замовлення."})}})}let p=1,w=0,b=8,h="",M=document.querySelector(".our-furniture .furniture-items"),U=document.querySelector(".our-furniture .options");const f=document.querySelector(".our-furniture .show-more");U.addEventListener("click",async e=>{const t=e.target.closest(".option");if(!t)return;document.querySelectorAll(".our-furniture .options .option").forEach(r=>r.classList.remove("active")),t.classList.add("active"),h=t.dataset.category,p=1;const s=await B(h,p),o=s.furnitures;M.innerHTML="",q(o),w=Math.ceil(s.totalItems/b),f.style.display=p<w?"block":"none"});f.addEventListener("click",async()=>{f.classList.add("active"),p++;const t=(await B(h,p)).furnitures;q(t),f.classList.remove("active"),f.style.display=p<w?"block":"none"});window.addEventListener("DOMContentLoaded",async()=>{let e=document.querySelector(".our-furniture .options .option:first-child");e.classList.add("active"),h=e.dataset.category;let t=await B(h,p),s=t.furnitures;M.innerHTML="",q(s),w=Math.ceil(t.totalItems/b)});async function B(e,t){const s=e==="All furniture"?`https://furniture-store-v2.b.goit.study/api/furnitures?page=${t}&limit=${b}`:`https://furniture-store-v2.b.goit.study/api/furnitures?category=${e}&page=${t}&limit=${b}`;try{return(await axios.get(s)).data}catch(o){return d.info({position:"topRight",message:o.message}),{furnitures:[],totalItems:0}}}function q(e){let t=e.map(o=>`<li class="item" data-id="${o._id}">
        <div class="item-image-container">
            <img src="${o.images[0]}"/>
        </div>
            <p class="item-name">${o.name}</p>
            <div class="color-options">
                <button class="color" type="button" data-color = "${o.color[0]}" data-img="${o.images[0]}"></button>
                <button class="color" type="button" data-color = "${o.color[1]}" data-img="${o.images[1]}"></button>
                <button class="color" type="button" data-color = "${o.color[2]}" data-img="${o.images[2]}"></button>
            </div>

            <p class="item-price"><span>${o.price}</span> грн</p>
            <button class="details-button" data-id="${o._id}">Детальніше</button>
        
        </li>`).join("");M.insertAdjacentHTML("beforeend",t),document.querySelectorAll(".our-furniture .furniture-items .item .color-options .color").forEach(o=>{o.style.backgroundColor=o.dataset.color}),Y(),J()}function Y(){document.querySelectorAll(".color-options .color").forEach(t=>{t.addEventListener("click",()=>{const s=t.dataset.img,r=t.closest(".item").querySelector(".item-image-container img");r.src=s})})}async function Z(){try{return(await H.get("https://furniture-store.b.goit.study/api/feedbacks",{params:{page:1,limit:10}})).data.feedbacks}catch(e){d.error({title:"Помилка",message:"Не вдалося завантажити відгуки. Спробуйте пізніше.",position:"topRight"}),console.error("Error fetching feedbacks:",e)}}async function ee(e){const t=document.querySelector(".review-carousel"),s=e.map(o=>`<li class="review-item swiper-slide">
  <div class="stars-rating" data-score="${o.rate}"></div>
  <p class="review-item-text">"${o.descr}"</p>
  <p class="review-item-name">${o.name}</p>
</li>`).join("");t.querySelector(".review .swiper-wrapper").insertAdjacentHTML("beforeend",s),document.querySelectorAll(".stars-rating").forEach(o=>{const r=parseFloat(o.dataset.score);new A(o,{round:{down:.25,full:.75,up:.76},readOnly:!0,score:r,starType:"i"}).init()})}const te=document.querySelector(".review-carousel"),oe=new z(te,{slidesPerView:1,spaceBetween:16,breakpoints:{768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3}},pagination:{el:".review .swiper-pagination",clickable:!0,dynamicBullets:!0},navigation:{prevEl:".review .nav-btn-prev",nextEl:".review .nav-btn-next"}});async function re(){try{const e=await Z();ee(e),oe.update()}catch(e){d.error({title:"Помилка",message:"Не вдалося завантажити галерею відгуків. Спробуйте пізніше.",position:"topRight"}),console.error("Error fetching feedback:",e)}finally{}}re();function se(){if(document.querySelector(".accordion-container"))try{new X(".accordion-container",{duration:400,showMultiple:!1,collapse:!0,onOpen:t=>{},onClose:t=>{}})}catch{}}document.addEventListener("DOMContentLoaded",se);const F=document.querySelector(".footer-logo");F&&F.addEventListener("click",e=>{e.preventDefault();const t=window.location.pathname.split("/"),s=t[1]?`/${t[1]}/`:"/";window.location.href=window.location.origin+s});
//# sourceMappingURL=index.js.map
